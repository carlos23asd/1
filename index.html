<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Transmitir WebRTC a SRS</title>
</head>
<body style="text-align:center; background:#111; color:white;">
  <h2>Transmisi√≥n WebRTC</h2>
  <video id="video" autoplay muted playsinline style="width: 480px; border: 2px solid red;"></video>
  <br>
  <button onclick="startPublish()">Iniciar transmisi√≥n</button>

  <!-- üëá Aqu√≠ importamos el adaptador correcto -->
  <script src="https://cdn.jsdelivr.net/npm/srs-sdk@1.0.37/webrtc-adaptor.min.js"></script>

  <script>
    async function startPublish() {
      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      document.getElementById('video').srcObject = stream;

      const config = {
        url: "webrtc://168.231.71.30/live/stream", // Reemplaza con tu IP
        stream: stream
      };

      const adaptor = new SrsRtcPublisherAsync();

      adaptor.onpublish = () => {
        console.log("‚úÖ Transmitiendo a SRS.");
        alert("¬°Transmisi√≥n iniciada!");
      };

      adaptor.onerror = (e) => {
        console.error("‚ùå Error al transmitir:", e);
        alert("Error al transmitir.");
      };

      await adaptor.publish(config.url, config.stream);
    }
  </script>
</body>
</html>
